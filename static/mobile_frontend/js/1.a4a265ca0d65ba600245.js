webpackJsonp([1],{"1jIc":function(e,t){},"2Lej":function(e,t,s){"use strict";var i={name:"TransOptions",props:{transItem:{type:Object,require:!0,default:{}}},computed:{failed:function(){return this.transItem.failed},is_pause:function(){return this.transItem.is_pause},is_downloading:function(){return!this.transItem.is_pause},can_remove:function(){return this.transItem.failed||this.transItem.is_pause||this.transItem.merged},progess:function(){return this.transItem.succed_chunks.length/this.transItem.chunk_count*100}},methods:{RefreshClick:function(){this.$emit("RefreshClick",this.transItem)},PlayClick:function(){this.$emit("PlayClick",this.transItem)},PauseClick:function(){this.$emit("PauseClick",this.transItem)},RemoveClick:function(){this.$emit("RemoveClick",this.transItem)}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"trans_options"},[s("el-button-group",[e.failed?s("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"small",disabled:100==e.progess},on:{click:e.RefreshClick}}):e.is_pause?s("el-button",{attrs:{type:"primary",icon:"el-icon-video-play",size:"small",disabled:100==e.progess},on:{click:e.PlayClick}}):s("el-button",{attrs:{type:"primary",icon:"el-icon-video-pause",size:"small",disabled:100==e.progess},on:{click:e.PauseClick}}),e._v(" "),s("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",disabled:!e.can_remove},on:{click:e.RemoveClick}})],1)],1)},staticRenderFns:[]};var a=s("VU/8")(i,n,!1,function(e){s("bPrR")},"data-v-e991c42e",null);t.a=a.exports},Ir6P:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("Xxa5"),n=s.n(i),a=s("//Fk"),r=s.n(a),c=s("exGp"),l=s.n(c),o=s("Dd8w"),u=s.n(o),f=s("NYxO"),p=s("2Lej"),h={components:{TransProgess:s("b23p").a,TransOptions:p.a},name:"Upload",data:function(){return{statusList:["已暂停","上传中...","请求合并中...","已完成"],fileResolve:null}},methods:u()({},Object(f.c)(["PAUSE_UPLOAD_ITEM","UPDATE_UPLOAD_ITEM"]),{refresh_click:function(e){null!=e.file?(this.$store.dispatch("REUPLOAD_FILE",e.file_id),this.$message({message:"已开始重新上传",type:"success"})):this.reselect_file(e)},play_click:function(e){null!=e.file?(this.$store.dispatch("REUPLOAD_FILE",e.file_id),this.$message({message:"继续上传成功",type:"success"})):this.reselect_file(e)},pause_click:function(e){this.PAUSE_UPLOAD_ITEM(e.file_id),this.$message({message:"暂停上传成功",type:"success"})},remove_click:function(e){this.$store.dispatch("REMOVE_UPLOAD_FILE",e.file_id),this.$message({message:"删除上传成功",type:"success"})},reselect_file:function(e){var t=this;return l()(n.a.mark(function s(){var i;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.$message({message:"文件对象已丢失, 请重新选择该上传的文件",type:"warning"}),s.next=3,new r.a(function(e){t.fileResolve=e,t.$refs.fileInput.click()});case 3:i=s.sent,t.process_file(i,e);case 5:case"end":return s.stop()}},s,t)}))()},file_change:function(e){this.fileResolve&&(this.fileResolve(e.target.files[0]),this.fileResolve=null)},process_file:function(e,t){if(e)return e.name==t.file_name&&e.size==t.file_size?(this.UPDATE_UPLOAD_ITEM({file_id:t.file_id,data:{file:e}}),this.$store.dispatch("REUPLOAD_FILE",t.file_id),void this.$message({message:"继续上传成功",type:"success"})):void this.$message({message:"非同一文件或文件已更新, 请选择正确文件或删除记录重新上传",type:"warning"});this.$message({message:"未选择文件, 已取消重新上传",type:"warning"})}}),computed:u()({},Object(f.b)({UploadList:"upload_list"}))},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"upload"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.UploadList}},[s("el-table-column",{attrs:{label:"文件名",prop:"file_name",width:"80"}}),e._v(" "),s("el-table-column",{attrs:{label:"上传状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("trans-progess",{attrs:{transItem:t.row,statusList:e.statusList}})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("trans-options",{attrs:{transItem:t.row},on:{RefreshClick:e.refresh_click,PlayClick:e.play_click,PauseClick:e.pause_click,RemoveClick:e.remove_click}})]}}])}),e._v(" "),s("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.file_change}})],1)],1)},staticRenderFns:[]};var d=s("VU/8")(h,m,!1,function(e){s("yaGQ")},"data-v-7340c8b6",null);t.default=d.exports},b23p:function(e,t,s){"use strict";var i={name:"TransProgess",props:{transItem:{type:Object,require:!0,default:{}},statusList:{type:Array,require:!0,default:["已暂停","下载中...","合并分片中...","已完成"]}},computed:{TransStatus:function(){return this.transItem.failed?this.transItem.err_msg||"网络异常":this.transItem.is_pause?this.statusList[0]:this.transItem.succed_chunks.length!=this.transItem.chunk_count?this.statusList[1]:this.transItem.merged?this.statusList[3]:this.statusList[2]},progess:function(){return Math.floor(this.transItem.succed_chunks.length/this.transItem.chunk_count*100)}}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("span",[this._v(this._s(this.TransStatus))]),this._v(" "),this.transItem.failed?t("el-progress",{attrs:{status:"exception",percentage:this.progess}}):t("el-progress",{attrs:{percentage:this.progess}})],1)},staticRenderFns:[]};var a=s("VU/8")(i,n,!1,function(e){s("1jIc")},"data-v-c48a63d4",null);t.a=a.exports},bPrR:function(e,t){},yaGQ:function(e,t){}});
//# sourceMappingURL=1.a4a265ca0d65ba600245.js.map
