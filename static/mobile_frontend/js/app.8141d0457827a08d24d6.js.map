{"version":3,"sources":["webpack:///./src/network/request.js","webpack:///./src/network/download.js","webpack:///./src/components/content/menubar/MenuBar.vue?3313","webpack:///./src/components/content/menubar/MenuBar.vue","webpack:///src/components/content/menubar/MenuBar.vue","webpack:///src/App.vue","webpack:///./src/App.vue?c6ee","webpack:///./src/App.vue","webpack:///./src/router/index.js","webpack:///./src/network/upload.js","webpack:///./src/store/serviceStorage.js","webpack:///./src/utils/public_func.js","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///./src/network/browse.js"],"names":["request","__webpack_require__","axios","create","baseURL","timeout","interceptors","use","config","err","response","result","data","uuid","get","_ref","DownloadChunk","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","a","mark","_callee","secret_key","pwd","start","end","url","chunk_size","hit_log","arguments","length","undefined","wrap","_context","prev","next","post","ciphertext","headers","Range","responseType","sent","errno","abrupt","succed","errmsg","Blob","size","stop","this","_x","_x2","_x3","_x4","_x5","apply","menubar_MenuBar","render","_vm","_h","$createElement","_c","_self","attrs","collapse","isCollapse","default-active","$route","path","index","on","click","$event","itemClick","staticClass","_v","slot","staticRenderFns","content_menubar_MenuBar","normalizeComponent","name","methods","link","$router","replace","ssrContext","App","components","MenuBar","show_backup","show_msg_box","created","PAUSE_ALL_DOWNLOAD_HISTORY","PAUSE_ALL_UPLOAD_HISTORY","document","title","mounted","_this","base_url","getElementById","innerText","defaults","$alert","showClose","center","confirmButtonText","callback","action","$store","dispatch","extends_default","Object","vuex_esm","selectortype_template_index_0_src_App","id","_e","height","width","src_App","App_normalizeComponent","Vue","Router","originalPush","prototype","push","location","call","catch","originalReplace","_ref2","_ref3","router","routes","component","e","then","bind","mode","serviceStorage","set","key","localStorage","setItem","getItem","remove","removeItem","clear","BROWSE_PARAMS","BROWSE_PREFIX","BROWSE_HISTORY","DOWNLOAD_HISTORY","DOWNLOAD_PREFIX","UPLOAD_HISTORY","UPLOAD_PREFIX","UploadChunk","asyncToGenerator_default","regenerator_default","chunk","file_name","chunk_id","curr_path","formData","FormData","append","Content-Type","_x6","_x7","UploadMerge","_callee2","chunk_count","_context2","_x9","_x10","_x11","_x12","_x13","_x14","UploadRemove","_callee3","_context3","_x15","_x16","_x17","_x18","_x19","deepClone","obj","typeof_default","copy","Array","isArray","i","hasOwnProperty","copyHistoryRMChunks","download_history","download_history_","values_default","forEach","download_item","merged","succed_chunks","fill","mergeChunks","chunks","blob","documentElem","createElement","href","window","URL","createObjectURL","download","body","appendChild","removeChild","revokeObjectURL","copyHistoryRMFile","upload_history","upload_history_","upload_item","file","file_id","calcChunkSize","duration","Vuex","store","Store","strict","process","state","browse_params","JSON","parse","browse_history","Dchunk_size","Uchunk_size","mutations","SET_BROWSE_PARAMS","params","stringify_default","SET_BROWSE_HISTORY","UPDATE_BROWSE_HISTORY","browse_data","idx","findIndex","splice","REMOVE_BROWSE_HISTORY","CLEAR_BROWSE_HISTORY","UPDATE_DOWNLOAD_HISTORY","download_data","UPDATE_DOWNLOAD_ITEM","new_item","PAUSE_DOWNLOAD_ITEM","is_pause","REMOVE_DOWNLOAD_ITEM","delete","CLEAR_DOWNLOAD_HISTORY","UPDATE_UPLOAD_HISTORY","upload_data","UPDATE_UPLOAD_ITEM","PAUSE_UPLOAD_ITEM","REMOVE_UPLOAD_ITEM","CLEAR_UPLOAD_HISTORY","UPDATE_CHUNK_SIZE","chunk_sizes","_chunk_sizes","slicedToArray_default","actions","START_DOWNLOAD_FILE","context","res","commit","Math","min","file_size","failed","err_msg","REDOWNLOAD_FILE","_this2","START_UPLOAD_FILE","_this3","_res","slice","REUPLOAD_FILE","_this4","_callee4","_res2","_context4","REMOVE_UPLOAD_FILE","_this5","_callee5","_context5","GEN_CHUNK_SIZE","_this6","_callee6","start_time","download_duration","_context6","Date","getTime","GetDownloadSpeed","PostUploadSpeed","getters","download_list","upload_list","modules","productionTip","Menu","MenuItem","Container","Header","Aside","Main","Button","ButtonGroup","Table","TableColumn","Alert","Icon","Progress","MessageBox","Message","Loading","alert","$prompt","prompt","$confirm","confirm","$message","el","template","Cache-Control","buffer","Uint8Array","type","received_size"],"mappings":"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","file":"js/app.8141d0457827a08d24d6.js","sourcesContent":["import axios from \"axios\"\n\nconst request = axios.create({\n  baseURL: 'http://127.0.0.1',\n  timeout: 5000\n})\n\nrequest.interceptors.request.use(config => {\n  return config\n}, err => {\n  return err\n})\n\nrequest.interceptors.response.use(result => {\n  return result.data\n}, err => {\n  return err\n})\n\nexport default request;\n\n\n\n// WEBPACK FOOTER //\n// ./src/network/request.js","import request from \"./request\";\n\nexport function GetFileSize(uuid) {\n  return request.get('/file_size/' + uuid)\n}\n\nexport async function DownloadChunk(uuid, secret_key, pwd, start, end, hit_log=false) {\n  const url = !hit_log ? '/download/' + uuid : '/download/' + uuid + \"?hit_log=true\";\n  const response = await request.post(\n    url,\n    {\n      'secret_key': secret_key,\n      'ciphertext': pwd\n    },\n    {\n      headers: { Range: `bytes=${start}-${end}` },\n      responseType: 'blob',\n    }\n  );\n  if ( response.errno != undefined ) {\n    return {succed: false, data: response.errmsg}\n  }\n  if ( !response instanceof Blob) {\n    return {succed: false, data: \"后端异常, 返回非预期数据类型\"}\n  }\n  const chunk_size = end - start;\n  if ( chunk_size > 0 && chunk_size != response.size ) {\n    return {succed: false, data: \"下载片段失败, 服务器网络异常\"}\n  }\n  return {succed: true, data: response}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/network/download.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-menu',{attrs:{\"collapse\":_vm.isCollapse,\"default-active\":_vm.$route.path}},[_c('el-menu-item',{attrs:{\"index\":\"/browse\"},on:{\"click\":function($event){return _vm.itemClick('/browse')}}},[_c('i',{staticClass:\"el-icon-mobile-phone\"}),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"文件列表\")])]),_vm._v(\" \"),_c('el-menu-item',{attrs:{\"index\":\"/history\"},on:{\"click\":function($event){return _vm.itemClick('/history')}}},[_c('i',{staticClass:\"el-icon-time\"}),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"浏览历史\")])]),_vm._v(\" \"),_c('el-menu-item',{attrs:{\"index\":\"/downloads\"},on:{\"click\":function($event){return _vm.itemClick('/downloads')}}},[_c('i',{staticClass:\"el-icon-download\"}),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"下载记录\")])]),_vm._v(\" \"),_c('el-menu-item',{attrs:{\"index\":\"/uploads\"},on:{\"click\":function($event){return _vm.itemClick('/uploads')}}},[_c('i',{staticClass:\"el-icon-upload2\"}),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"上传记录\")])]),_vm._v(\" \"),_c('el-menu-item',{attrs:{\"index\":\"/settings\"},on:{\"click\":function($event){return _vm.itemClick('/settings')}}},[_c('i',{staticClass:\"el-icon-setting\"}),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"设置\")])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5e29923c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/content/menubar/MenuBar.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5e29923c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MenuBar.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MenuBar.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MenuBar.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5e29923c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./MenuBar.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5e29923c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/content/menubar/MenuBar.vue\n// module id = null\n// module chunks = ","<template>\n  <el-menu :collapse=\"isCollapse\" :default-active=\"$route.path\">\n    <el-menu-item index=\"/browse\" @click=\"itemClick('/browse')\">\n      <i class=\"el-icon-mobile-phone\"></i>\n      <span slot=\"title\">文件列表</span>\n    </el-menu-item>\n    <el-menu-item index=\"/history\" @click=\"itemClick('/history')\">\n      <i class=\"el-icon-time\"></i>\n      <span slot=\"title\">浏览历史</span>\n    </el-menu-item>\n    <el-menu-item index=\"/downloads\" @click=\"itemClick('/downloads')\">\n      <i class=\"el-icon-download\"></i>\n      <span slot=\"title\">下载记录</span>\n    </el-menu-item>\n    <el-menu-item index=\"/uploads\" @click=\"itemClick('/uploads')\">\n      <i class=\"el-icon-upload2\"></i>\n      <span slot=\"title\">上传记录</span>\n    </el-menu-item>\n    <el-menu-item index=\"/settings\" @click=\"itemClick('/settings')\">\n      <i class=\"el-icon-setting\"></i>\n      <span slot=\"title\">设置</span>\n    </el-menu-item>\n  </el-menu>\n</template>\n\n<script>\n  export default {\n    name: \"MenuBar\",\n    data() {\n      return {\n        isCollapse: true\n      };\n    },\n    methods: {\n      itemClick(link) {\n        this.$router.replace(link);\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/content/menubar/MenuBar.vue","<template>\n  <div id=\"app\">\n    <div>\n      <el-container v-if=\"!show_msg_box\">\n        <el-header height=\"40px\">File-Sharer</el-header>\n\t\t\t  <el-container>\n\t\t\t    <el-aside width=\"65px\">\n            <menu-bar />\n          </el-aside>\n\t\t\t    <el-main>\n            <router-view />\n          </el-main>\n\t\t\t  </el-container>\n\t\t\t</el-container>\n    </div>\n  </div>\n</template>\n\n<script>\nimport request from \"@/network/request\";\nimport MenuBar from './components/content/menubar/MenuBar.vue';\nimport { mapMutations } from \"vuex\";\n\nexport default {\n  name: 'App',\n  components: {\n    MenuBar\n  },\n  data() {\n    return {\n      show_backup: true,\n      show_msg_box: true\n    }\n  },\n  created() {\n    // 将所有未完成下载置为暂停\n    this.PAUSE_ALL_DOWNLOAD_HISTORY();\n    // 将所有未完成上传置为暂停\n    this.PAUSE_ALL_UPLOAD_HISTORY();\n    document.title = \"File-Sharer\";\n  },\n  mounted() {\n    const base_url = document.getElementById('baseUrl').innerText;\n    request.defaults.baseURL = base_url;\n    this.$alert('请勿在任何情况下刷新页面,否则上传/下载会暂停(下载进度也会消失),且需重新扫码!!!', '温馨提示', {\n      showClose: false,\n      center: true,\n      confirmButtonText: '确定并进入',\n      callback: action => {\n        this.show_msg_box = false;\n        this.$store.dispatch(\"GEN_CHUNK_SIZE\");\n        this.$router.replace('/browse');\n      }\n    });\n  },\n  methods: {\n    ...mapMutations([\"PAUSE_ALL_DOWNLOAD_HISTORY\", \"PAUSE_ALL_UPLOAD_HISTORY\"]),\n  }\n}\n</script>\n\n<style>\n/* 修复手机浏览器上MessageBox显示不全和位置靠顶的问题 */\n@media screen and (max-width: 750px) {\n  .el-message-box {\n    width: 80% !important;\n  }\n}\n\n.el-container{\n  height: 100%;\n}\n\nhtml,body,#app{\n  margin: 0;\n  padding: 0;\n  height: 100%;\n}\n\n.el-header {\n  background-color: #81C7FF;\n  color: #fff;\n  text-align: center;\n  line-height: 40px;\n}\n\n.el-aside {\n  color: #333;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',[(!_vm.show_msg_box)?_c('el-container',[_c('el-header',{attrs:{\"height\":\"40px\"}},[_vm._v(\"File-Sharer\")]),_vm._v(\" \"),_c('el-container',[_c('el-aside',{attrs:{\"width\":\"65px\"}},[_c('menu-bar')],1),_vm._v(\" \"),_c('el-main',[_c('router-view')],1)],1)],1):_vm._e()],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-57581715\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-57581715\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-57581715\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\n\nVue.use(Router)\n\n/* 解决双击切换路由报错 */\n// 解决双击时路由通过push报错\nconst originalPush = Router.prototype.push\nRouter.prototype.push = function (location) {\n  return originalPush.call(this, location).catch(err => { err })\n}\n// 解决双击时路由通过replace报错\nconst originalReplace = Router.prototype.replace\nRouter.prototype.replace = function (location) {\n  return originalReplace.call(this, location).catch(err => { err })\n}\n\nexport default new Router({\n  routes: [\n    // {\n    //   path: '/',\n    //   redirect: '/browse'\n    // },\n    {\n      path: '/browse',\n      name: 'Browse',\n      component: () => import('@/views/browse/Browse')\n    },\n    {\n      path: '/history',\n      name: 'History',\n      component: () => import('@/views/history/History')\n    },\n    {\n      path: '/downloads',\n      name: 'Downloads',\n      component: () => import('@/views/downloads/Downloads')\n    },\n    {\n      path: '/uploads',\n      name: 'Uploads',\n      component: () => import('@/views/uploads/Uploads')\n    },\n    {\n      path: '/settings',\n      name: \"Settings\",\n      component: () => import('@/views/settings/Settings')\n    }\n  ],\n  mode: 'history'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","import request from \"./request\";\n\nexport async function UploadChunk(\n  uuid, secret_key, pwd, chunk, file_name,\n  chunk_id, curr_path, hit_log=false\n) {\n  const url = !hit_log ? '/upload/' + uuid : '/upload/' + uuid + \"?hit_log=true\"\n  const formData = new FormData();\n  formData.append(\"secret_key\", secret_key);\n  formData.append(\"ciphertext\", pwd);\n  formData.append(\"file\", chunk);\n  formData.append(\"file_name\", file_name);\n  formData.append(\"chunk_id\", chunk_id);\n  formData.append(\"curr_path\", curr_path);\n  const response = await request.post(\n    url,\n    formData,\n    {\n      headers: { 'Content-Type': 'multipart/form-data' }\n    }\n  );\n  if ( response.errno != 200 && response.errno != 4006 ) {\n    return {succed: false, data: response.errmsg}\n  }\n  return {succed: true, data: response.errmsg}\n}\n\nexport async function UploadMerge(\n  uuid, secret_key, pwd, file_name, chunk_count, curr_path\n) {\n  const formData = new FormData();\n  formData.append(\"secret_key\", secret_key);\n  formData.append(\"ciphertext\", pwd);\n  formData.append(\"file_name\", file_name);\n  formData.append(\"chunk_count\", chunk_count);\n  formData.append(\"curr_path\", curr_path);\n  const response = await request.post(\n    '/upload/merge/' + uuid,\n    formData,\n    {\n      headers: { 'Content-Type': 'multipart/form-data' }\n    }\n  );\n  if ( response.errno != 200 ) {\n    return {succed: false, data: response.errmsg}\n  }\n  return {succed: true, data: response.errmsg}\n}\n\nexport async function UploadRemove(\n  uuid, secret_key, pwd, file_name, curr_path\n) {\n  const formData = new FormData();\n  formData.append(\"secret_key\", secret_key);\n  formData.append(\"ciphertext\", pwd);\n  formData.append(\"file_name\", file_name);\n  formData.append(\"curr_path\", curr_path);\n  const response = await request.post(\n    '/upload/remove/' + uuid,\n    formData,\n    {\n      headers: { 'Content-Type': 'multipart/form-data' }\n    }\n  );\n  if ( response.errno != 200 ) {\n    return {succed: false, data: response.errmsg}\n  }\n  return {succed: true, data: response.errmsg}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/network/upload.js","// 本地缓存服务\nconst PREFIX = \"fileSharer_\"\n\n// 浏览历史模块\nconst BROWSE_PREFIX = `${PREFIX}browse_`\nconst BROWSE_PARAMS = `${BROWSE_PREFIX}params`\nconst BROWSE_HISTORY = `${BROWSE_PREFIX}history`\n\n// 下载模块\nconst DOWNLOAD_PREFIX = `${PREFIX}download_`\nconst DOWNLOAD_HISTORY = `${DOWNLOAD_PREFIX}history`\n\n// 上传模块\nconst UPLOAD_PREFIX = `${PREFIX}upload_`\nconst UPLOAD_HISTORY = `${UPLOAD_PREFIX}history`\n\nconst set = (key, data) => {\n  localStorage.setItem(key, data);\n}\n\nconst get = (key) => {\n  return localStorage.getItem(key);\n}\n\nconst remove = (key) => {\n  localStorage.removeItem(key);\n}\n\nconst clear = () => {\n  localStorage.clear()\n}\n\nexport default {\n  set,\n  get,\n  remove,\n  clear,\n  BROWSE_PARAMS,\n  BROWSE_HISTORY,\n  DOWNLOAD_HISTORY,\n  UPLOAD_HISTORY\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/serviceStorage.js","export function deepClone(obj) {\n  if (typeof obj !== 'object' || obj === null) {\n    return obj;\n  }\n\n  let copy;\n\n  if (Array.isArray(obj)) {\n    copy = [];\n    for (let i = 0; i < obj.length; i++) {\n      copy.push(deepClone(obj[i]));\n    }\n  } else {\n    copy = {};\n    for (let key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        copy[key] = deepClone(obj[key]);\n      }\n    }\n  }\n\n  return copy;\n}\n\nexport function copyHistoryRMChunks(download_history) {\n  if ( download_history == null ) {\n    return download_history;\n  }\n  let download_history_ = {};\n  Object.values(download_history).forEach(obj => {\n    let download_item = deepClone(obj);\n    // 下载完成的保留下载进度, 未完成的将下载进度置空\n    if ( download_item.merged ) {\n      download_item.succed_chunks = new Array(download_item.chunk_count).fill(0);\n    } else {\n      download_item.succed_chunks = [];\n    }\n    download_history_[download_item.uuid] = download_item;\n  })\n  return download_history_;\n}\n\nexport function mergeChunks(chunks, file_name) {\n  const blob = new Blob(chunks);\n  const documentElem = document.createElement('a');\n  const href = window.URL.createObjectURL(blob);\n  documentElem.href = href;\n  documentElem.download = file_name;\n  document.body.appendChild(documentElem);\n  documentElem.click(); // 点击下载\n  document.body.removeChild(documentElem); // 下载完成移除元素\n  window.URL.revokeObjectURL(href); // 释放掉bl\n}\n\nexport function copyHistoryRMFile(upload_history) {\n  if ( upload_history == null ) {\n    return upload_history;\n  }\n  let upload_history_ = {};\n  Object.values(upload_history).forEach(obj => {\n    let upload_item = deepClone(obj);\n    upload_item.file = null;\n    upload_history_[upload_item.file_id] = upload_item;\n  });\n  return upload_history_;\n}\n\nexport function calcChunkSize(duration) {\n  // < 1 M/s\n  if (duration > 1000) {\n    return 512 * 1024;\n  // < 2 M/s\n  } else if (duration > 500) {\n    return 1024 * 1024;\n  // < 5 M/s\n  } else if (duration > 200) {\n    return 2 * 1024 * 1024;\n  // < 10 M/s\n  } else if (duration > 100) {\n    return 5 * 1024 * 1024;\n  // > 10 M/s\n  } else {\n    return 10 * 1024 * 1024;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/public_func.js","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nimport serviceStorage from \"./serviceStorage\"\nimport { GetDownloadSpeed, PostUploadSpeed } from '@/network/browse'\nimport { DownloadChunk } from \"@/network/download\"\nimport { UploadChunk, UploadMerge, UploadRemove } from \"@/network/upload\"\nimport { copyHistoryRMChunks, mergeChunks, copyHistoryRMFile, calcChunkSize } from \"@/utils/public_func\"\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  strict: process.env.NODE_ENV !== \"production\",\n  state: {\n    browse_params: JSON.parse(serviceStorage.get(serviceStorage.BROWSE_PARAMS)),\n    browse_history: JSON.parse(serviceStorage.get(serviceStorage.BROWSE_HISTORY)),\n    download_history: JSON.parse(serviceStorage.get(serviceStorage.DOWNLOAD_HISTORY)),\n    upload_history: JSON.parse(serviceStorage.get(serviceStorage.UPLOAD_HISTORY)),\n    Dchunk_size: 1048576,\n    Uchunk_size: 1048576\n  },\n  mutations: {\n    SET_BROWSE_PARAMS(state, params) {\n      state.browse_params = params;\n      serviceStorage.set(serviceStorage.BROWSE_PARAMS, JSON.stringify(params));\n    },\n    SET_BROWSE_HISTORY(state, browse_history) {\n      state.browse_history = browse_history;\n      serviceStorage.set(serviceStorage.BROWSE_HISTORY, JSON.stringify(browse_history));\n    },\n    UPDATE_BROWSE_HISTORY(state, browse_data) {\n      var browse_history = state.browse_history;\n      if (browse_history == null) {\n        browse_history = [browse_data];\n      } else {\n        const idx = browse_history.findIndex(obj => obj.uuid == browse_data.uuid);\n        if (idx != -1) {\n          browse_history.splice(idx, 1, browse_data);\n        } else {\n          browse_history.push(browse_data);\n        }\n      };\n      state.browse_history = browse_history;\n      serviceStorage.set(serviceStorage.BROWSE_HISTORY, JSON.stringify(browse_history));\n    },\n    REMOVE_BROWSE_HISTORY(state, uuid) {\n      var browse_history = state.browse_history;\n      if (browse_history == null) {\n        return;\n      };\n      const idx = browse_history.findIndex(obj => obj.uuid == uuid);\n      if (idx != -1) {\n        browse_history.splice(idx, 1);\n        state.browse_history = browse_history;\n        serviceStorage.set(serviceStorage.BROWSE_HISTORY, JSON.stringify(browse_history));\n      }\n    },\n    CLEAR_BROWSE_HISTORY(state) {\n      state.browse_history = null;\n      serviceStorage.remove(serviceStorage.BROWSE_HISTORY);\n    },\n    UPDATE_DOWNLOAD_HISTORY(state, download_data) {\n      var download_history = state.download_history;\n      if (download_history == null) {\n        download_history = {};\n      }\n      Vue.set(download_history, download_data.uuid, download_data);\n      state.download_history = download_history;\n      var download_history_ = copyHistoryRMChunks(download_history);\n      serviceStorage.set(serviceStorage.DOWNLOAD_HISTORY, JSON.stringify(download_history_));\n    },\n    UPDATE_DOWNLOAD_ITEM(state, params) {\n      var download_history = state.download_history;\n      if (download_history == null) {\n        return;\n      }\n      const {uuid, data} = params;\n      const download_item = download_history[uuid];\n      if (download_item != undefined) {\n        const new_item = {...download_item, ...data};\n        Vue.set(download_history, uuid, new_item);\n      };\n      state.download_history = download_history;\n      var download_history_ = copyHistoryRMChunks(download_history);\n      serviceStorage.set(serviceStorage.DOWNLOAD_HISTORY, JSON.stringify(download_history_));\n    },\n    PAUSE_DOWNLOAD_ITEM(state, uuid) {\n      var download_history = state.download_history;\n      if (download_history == null) {\n        return;\n      };\n      const download_item = download_history[uuid];\n      if (download_item != undefined) {\n        download_item.is_pause = true;\n        state.download_history = download_history;\n        var download_history_ = copyHistoryRMChunks(download_history);\n        serviceStorage.set(serviceStorage.DOWNLOAD_HISTORY, JSON.stringify(download_history_));\n      }\n    },\n    REMOVE_DOWNLOAD_ITEM(state, uuid) {\n      var download_history = state.download_history;\n      if (download_history == null) {\n        return;\n      };\n      const download_item = download_history[uuid];\n      if (download_item != undefined) {\n        Vue.delete(download_history, uuid);\n        state.download_history = download_history;\n        var download_history_ = copyHistoryRMChunks(download_history);\n        serviceStorage.set(serviceStorage.DOWNLOAD_HISTORY, JSON.stringify(download_history_));\n      }\n    },\n    PAUSE_ALL_DOWNLOAD_HISTORY(state) {\n      var download_history = state.download_history;\n      if (download_history == null) {\n        return;\n      };\n      Object.values(download_history).forEach(download_item => {\n        if ( !download_item.merged ) {\n          download_item.is_pause = true;\n        }\n      });\n      state.download_history = download_history;\n      var download_history_ = copyHistoryRMChunks(download_history);\n      serviceStorage.set(serviceStorage.DOWNLOAD_HISTORY, JSON.stringify(download_history_));\n    },\n    CLEAR_DOWNLOAD_HISTORY(state) {\n      state.download_history = null;\n      serviceStorage.remove(serviceStorage.DOWNLOAD_HISTORY);\n    },\n    UPDATE_UPLOAD_HISTORY(state, upload_data) {\n      var upload_history = state.upload_history;\n      if (upload_history == null) {\n        upload_history = {};\n      }\n      Vue.set(upload_history, upload_data.file_id, upload_data);\n      state.upload_history = upload_history;\n      var upload_history_ = copyHistoryRMFile(upload_history);\n      serviceStorage.set(serviceStorage.UPLOAD_HISTORY, JSON.stringify(upload_history_));\n    },\n    UPDATE_UPLOAD_ITEM(state, params) {\n      var upload_history = state.upload_history;\n      if (upload_history == null) {\n        return;\n      }\n      const {file_id, data} = params;\n      const upload_item = upload_history[file_id];\n      if (upload_item != undefined) {\n        const new_item = {...upload_item, ...data};\n        Vue.set(upload_history, file_id, new_item);\n      }\n      state.upload_history = upload_history;\n      var upload_history_ = copyHistoryRMFile(upload_history);\n      serviceStorage.set(serviceStorage.UPLOAD_HISTORY, JSON.stringify(upload_history_));\n    },\n    PAUSE_UPLOAD_ITEM(state, file_id) {\n      var upload_history = state.upload_history;\n      if (upload_history == null) {\n        return;\n      };\n      const upload_item = upload_history[file_id];\n      if (upload_item != undefined) {\n        upload_item.is_pause = true;\n        state.upload_history = upload_history;\n        var upload_history_ = copyHistoryRMFile(upload_history);\n        serviceStorage.set(serviceStorage.UPLOAD_HISTORY, JSON.stringify(upload_history_));\n      }\n    },\n    REMOVE_UPLOAD_ITEM(state, file_id) {\n      var upload_history = state.upload_history;\n      if (upload_history == null) {\n        return;\n      };\n      const upload_item = upload_history[file_id];\n      if (upload_item != undefined) {\n        Vue.delete(upload_history, file_id);\n        state.upload_history = upload_history;\n        var upload_history_ = copyHistoryRMFile(upload_history);\n        serviceStorage.set(serviceStorage.UPLOAD_HISTORY, JSON.stringify(upload_history_));\n      }\n    },\n    PAUSE_ALL_UPLOAD_HISTORY(state) {\n      var upload_history = state.upload_history;\n      if (upload_history == null) {\n        return;\n      };\n      Object.values(upload_history).forEach(upload_item => {\n        if ( !upload_item.merged ) {\n          upload_item.is_pause = true;\n        }\n      });\n      state.upload_history = upload_history;\n      var upload_history_ = copyHistoryRMFile(upload_history);\n      serviceStorage.set(serviceStorage.UPLOAD_HISTORY, JSON.stringify(upload_history_));\n    },\n    CLEAR_UPLOAD_HISTORY(state) {\n      state.upload_history = null;\n      serviceStorage.remove(serviceStorage.UPLOAD_HISTORY);\n    },\n    UPDATE_CHUNK_SIZE(state, chunk_sizes) {\n      const [Dchunk_size, Uchunk_size] = chunk_sizes;\n      if (Dchunk_size != 0) {\n        state.Dchunk_size = Dchunk_size;\n      }\n      if (Uchunk_size != 0) {\n        state.Uchunk_size = Uchunk_size\n      }\n    }\n  },\n  actions: {\n    async START_DOWNLOAD_FILE(context, uuid) {\n      // 理应不会进这个判断\n      var download_history = context.state.download_history;\n      if ( download_history == null || download_history[uuid] == undefined ) {\n        return\n      }\n      var download_item = download_history[uuid];\n      context.commit(\"UPDATE_DOWNLOAD_ITEM\", {uuid: uuid, data: {succed_chunks: []}});\n      for (let i = 0; i < download_item.chunk_count; i++) {\n        if ( context.state.download_history[uuid].is_pause ) {\n          return;\n        }\n        const start = i * download_item.chunk_size;\n        const end = Math.min(start + download_item.chunk_size, download_item.file_size);\n        const res = await DownloadChunk(\n          download_item.uuid, download_item.secret_key,\n          download_item.pwd, start, end, i == 0\n        );\n        if ( !res.succed ) {\n          context.commit(\"UPDATE_DOWNLOAD_ITEM\", {uuid: uuid, data: {failed: true, err_msg: res.data}});\n          return;\n        }\n        context.commit(\"UPDATE_DOWNLOAD_ITEM\", {\n          uuid: uuid,\n          data: {\n            succed_chunks: [...context.state.download_history[uuid].succed_chunks, res.data]\n          }\n        });\n      };\n      mergeChunks(context.state.download_history[uuid].succed_chunks, download_item.file_name);\n      context.commit(\"UPDATE_DOWNLOAD_ITEM\", {\n        uuid: uuid, data: {merged: true, succed_chunks: new Array(download_item.chunk_count).fill(0)}\n      });\n    },\n    async REDOWNLOAD_FILE(context, uuid) {\n      // 理应不会进这个判断\n      var download_history = context.state.download_history;\n      if ( download_history == null || download_history[uuid] == undefined ) {\n        return;\n      }\n      var download_item = download_history[uuid];\n      context.commit(\"UPDATE_DOWNLOAD_ITEM\", {uuid: uuid, data: {failed: false, err_msg: \"\", is_pause: false}});\n      for (let i = download_item.succed_chunks.length; i < download_item.chunk_count; i++) {\n        if ( context.state.download_history[uuid].is_pause ) {\n          return;\n        }\n        const start = i * download_item.chunk_size;\n        const end = Math.min(start + download_item.chunk_size, download_item.file_size);\n        const res = await DownloadChunk(\n          download_item.uuid, download_item.secret_key,\n          download_item.pwd, start, end\n        );\n        if ( !res.succed ) {\n          context.commit(\"UPDATE_DOWNLOAD_ITEM\", {uuid: uuid, data: {failed: true, err_msg: res.data}});\n          return;\n        }\n        context.commit(\"UPDATE_DOWNLOAD_ITEM\", {\n          uuid: uuid,\n          data: {\n            succed_chunks: [...context.state.download_history[uuid].succed_chunks, res.data]\n          }\n        });\n      }\n      mergeChunks(context.state.download_history[uuid].succed_chunks, download_item.file_name);\n      context.commit(\"UPDATE_DOWNLOAD_ITEM\", {\n        uuid: uuid, data: {merged: true, succed_chunks: new Array(download_item.chunk_count).fill(0)}\n      });\n    },\n    async START_UPLOAD_FILE(context, file_id) {\n      // 理应不会进这个判断\n      var upload_history = context.state.upload_history;\n      if ( upload_history == null || upload_history[file_id] == undefined ) {\n        return;\n      }\n      var upload_item = upload_history[file_id];\n      if ( upload_item.file == null ) {\n        context.commit(\"UPDATE_UPLOAD_ITEM\", {file_id: file_id, data: {failed: true, err_msg: \"选择的文件数据丢失\"}});\n        return;\n      }\n      context.commit(\"UPDATE_UPLOAD_ITEM\", {file_id: file_id, data: {succed_chunks: [], failed: false}});\n      for (let i = 0; i < upload_item.chunk_count; i++) {\n        if ( context.state.upload_history[file_id].is_pause ) {\n          return;\n        }\n        const start = i * upload_item.chunk_size;\n        const end = Math.min(start + upload_item.chunk_size, upload_item.file_size);\n        const chunk = upload_item.file.slice(start, end);\n        const res = await UploadChunk(\n          upload_item.uuid, upload_item.secret_key, upload_item.pwd, chunk,\n          upload_item.file_name, i, upload_item.curr_path, i == 0\n        );\n        if ( !res.succed ) {\n          context.commit(\"UPDATE_UPLOAD_ITEM\", {file_id: file_id, data: {failed: true, err_msg: res.data}});\n          return;\n        }\n        context.commit(\"UPDATE_UPLOAD_ITEM\", {\n          file_id: file_id,\n          data: {\n            succed_chunks: [...context.state.upload_history[file_id].succed_chunks, i]\n          }\n        });\n      };\n      const res = await UploadMerge(\n        upload_item.uuid, upload_item.secret_key, upload_item.pwd,\n        upload_item.file_name, upload_item.chunk_count, upload_item.curr_path\n      )\n      if ( !res.succed ){\n        context.commit(\"UPDATE_UPLOAD_ITEM\", {file_id: file_id, data: {failed: true, err_msg: res.data}});\n        return;\n      }\n      context.commit(\"UPDATE_UPLOAD_ITEM\", {file_id: file_id, data: {merged: true, file: null}});\n    },\n    async REUPLOAD_FILE(context, file_id) {\n      var upload_history = context.state.upload_history;\n      if ( upload_history == null || upload_history[file_id] == undefined ) {\n        return;\n      }\n      var upload_item = upload_history[file_id];\n      if ( upload_item.file == null ) {\n        context.commit(\"UPDATE_UPLOAD_ITEM\", {file_id: file_id, data: {failed: true, err_msg: \"选择的文件数据丢失\"}});\n        return;\n      }\n      context.commit(\"UPDATE_UPLOAD_ITEM\", {file_id: file_id, data: {failed: false, err_msg: \"\", is_pause: false}});\n      for (let i = upload_item.succed_chunks.length; i < upload_item.chunk_count; i++) {\n        if ( context.state.upload_history[file_id].is_pause ) {\n          return;\n        }\n        const start = i * upload_item.chunk_size;\n        const end = Math.min(start + upload_item.chunk_size, upload_item.file_size);\n        const chunk = upload_item.file.slice(start, end);\n        const res = await UploadChunk(\n          upload_item.uuid, upload_item.secret_key, upload_item.pwd, chunk,\n          upload_item.file_name, i, upload_item.curr_path, i == 0\n        );\n        if ( !res.succed ) {\n          context.commit(\"UPDATE_UPLOAD_ITEM\", {file_id: file_id, data: {failed: true, err_msg: res.data}});\n          return;\n        }\n        context.commit(\"UPDATE_UPLOAD_ITEM\", {\n          file_id: file_id,\n          data: {\n            succed_chunks: [...context.state.upload_history[file_id].succed_chunks, i]\n          }\n        });\n      };\n      const res = await UploadMerge(\n        upload_item.uuid, upload_item.secret_key, upload_item.pwd,\n        upload_item.file_name, upload_item.chunk_count, upload_item.curr_path\n      )\n      if ( !res.succed ){\n        context.commit(\"UPDATE_UPLOAD_ITEM\", {file_id: file_id, data: {failed: true, err_msg: res.data}});\n        return;\n      }\n      context.commit(\"UPDATE_UPLOAD_ITEM\", {file_id: file_id, data: {merged: true, file: null}});\n    },\n    async REMOVE_UPLOAD_FILE(context, file_id) {\n      var upload_history = context.state.upload_history;\n      if ( upload_history == null || upload_history[file_id] == undefined ) {\n        return;\n      }\n      var upload_item = upload_history[file_id];\n      if ( !upload_item.merged && upload_item.succed_chunks.length != 0 ) {\n        await UploadRemove(\n          upload_item.uuid, upload_item.secret_key, upload_item.pwd,\n          upload_item.file_name, upload_item.curr_path\n        );\n      }\n      context.commit(\"REMOVE_UPLOAD_ITEM\", upload_item.file_id);\n    },\n    async GEN_CHUNK_SIZE(context) {\n      var Dchunk_size = 0;\n      var Uchunk_size = 0;\n      const start_time = new Date().getTime();\n      var res = await GetDownloadSpeed();\n      if (res.succed) {\n        const download_duration = new Date().getTime() - start_time;\n        Dchunk_size = calcChunkSize(download_duration);\n      }\n      res = await PostUploadSpeed();\n      if (res.succed) {\n        Uchunk_size = calcChunkSize(res.duration);\n      }\n      context.commit(\"UPDATE_CHUNK_SIZE\", [Dchunk_size, Uchunk_size]);\n    }\n  },\n  getters: {\n    download_list: state => {\n      return state.download_history ? Object.values(state.download_history) : [];\n    },\n    upload_list: state => {\n      return state.upload_history ? Object.values(state.upload_history) : [];\n    }\n  },\n  modules: {}\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport 'element-ui/lib/theme-chalk/index.css';\nimport App from './App'\nimport router from './router'\nimport store from './store'\nimport '@/assets/css/base.css'\nimport {\n  Menu,\n  MenuItem,\n  Container,\n  Header,\n  Aside,\n  Main,\n  Button,\n  ButtonGroup,\n  Table,\n  TableColumn,\n  Alert,\n  Icon,\n  Progress,\n  MessageBox,\n  Message,\n  Loading\n} from 'element-ui';\n\nVue.config.productionTip = false\nVue.use(Menu);\nVue.use(MenuItem);\nVue.use(Container);\nVue.use(Header);\nVue.use(Aside);\nVue.use(Main);\nVue.use(Button);\nVue.use(ButtonGroup);\nVue.use(Table);\nVue.use(TableColumn);\nVue.use(Alert);\nVue.use(Icon);\nVue.use(Progress);\nVue.use(MessageBox);\nVue.use(Message);\nVue.use(Loading);\nVue.prototype.$alert = MessageBox.alert;\nVue.prototype.$prompt = MessageBox.prompt;\nVue.prototype.$confirm = MessageBox.confirm;\nVue.prototype.$message = Message;\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  store,\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import request from \"./request\";\n\nexport function GetListMobile(uuid) {\n  return request.get('/file_list/' + uuid)\n}\n\nexport function PostListMobile(uuid, secret_key, pwd) {\n  return request.post(\n    '/file_list/' + uuid,\n    {\n      'secret_key': secret_key,\n      'ciphertext': pwd\n    }\n  )\n}\n\nexport async function GetDownloadSpeed() {\n  const response = await request.get(\n    '/speed-test/download',\n    {\n      headers: { 'Cache-Control': 'no-cache' }\n    }\n  );\n  return {succed: true}\n}\n\nexport async function PostUploadSpeed() {\n  const buffer = new Uint8Array(1048576);\n  buffer.fill(0);\n  const blob = new Blob([buffer], {type: 'application/octet-stream'});\n  const formData = new FormData();\n  formData.append('file', blob, 'speed_test.bin');\n  const response = await request.post(\n    '/speed-test/upload',\n    formData,\n    {\n      headers: { 'Content-Type': 'multipart/form-data' }\n    }\n  );\n  if (response.errno != 200 || response.data.received_size != 1048576) {\n    return {succed: false, duration: 0}\n  } else {\n    return {succed: true, duration: response.data.duration}\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/network/browse.js"],"sourceRoot":""}
